{"version":3,"sources":["utils/delay.js","utils/qiniu.js","components/modal.js","components/uploader.js","utils/rune.js","components/entry.js","App.js","index.js"],"names":["delay","ms","Promise","ok","setTimeout","getToken","_callee","filename","response","result","regenerator_default","a","wrap","_context","prev","next","fetch","encodeURIComponent","sent","json","code","abrupt","data","stop","_callee2","file","onOkCallback","onFailCallback","token","observable","okHook","failHook","_context2","name","qiniu","mimeType","useCdnDomain","region","z2","console","log","error","subscribe","complete","Curtain","styled","div","_templateObject","Wrapper","_templateObject2","props","spread","Modal","children","type","onClose","_useState","useState","_useState2","Object","slicedToArray","setSpread","react_default","createElement","onClick","onTransitionEnd","lib","show","animate","level","corners","layer","DropHere","uploader_templateObject","Uploader","loading","setLoading","_useState3","_useState4","setCode","_useState5","_useState6","resultMessage","setResultMessage","handleDrop","useCallback","files","_x2","_x3","_x4","_put2Qiniu","apply","this","arguments","put2Qiniu","res","concat","key","_useDropzone","useDropzone","onDrop","getRootProps","getInputProps","Fragment","node","style","marginTop","someRuneAlphabets","entry_templateObject","TypeBox","entry_templateObject2","Input","input","_templateObject3","Output","Words","_templateObject4","Submit","Button","_templateObject5","Entry","onPass","setResult","entry_Wrapper","onChange","ev","target","value","sentence","raw","i","length","charCode","toUpperCase","charCodeAt","getRune","className","App","authed","setAuthStatus","theme","createTheme","rootElement","document","getElementById","ReactDOM","render","StrictMode"],"mappings":"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","file":"static/js/main.aa11e9af.chunk.js","sourcesContent":["export function delay(ms) {\n  return new Promise(ok => setTimeout(ok, ms))\n}","import * as qiniu from \"qiniu-js\";\nimport { delay } from './delay';\n\nasync function getToken(filename) {\n  const response = await fetch(\n    \"http://api.useyourself.cn/qiniu_config?filename=\" +\n      encodeURIComponent(filename)\n  );\n\n  const result = await response.json();\n\n  if (result.code === 1) {\n    return result.data;\n  } else {\n    return false;\n  }\n}\n\nexport async function put2Qiniu(file, onOkCallback, onFailCallback) {\n  const token = await getToken(file.name);\n\n  await delay(1000)\n\n  onOkCallback()\n  if (token) {\n    const observable = qiniu.upload(\n      file,\n      file.name,\n      token,\n      {\n        mimeType: [\"image/png\", \"image/jpeg\", \"image/gif\", \"image/svg+xml\"]\n      },\n      {\n        useCdnDomain: true,\n        region: qiniu.region.z2\n      }\n    );\n\n    const okHook = onOkCallback || console.log;\n    const failHook = onFailCallback || console.error;\n    observable.subscribe({\n      complete: okHook,\n      error: failHook\n    });\n  }\n}\n","import React, { useState } from \"react\";\nimport { Frame } from \"arwes\";\nimport styled from \"styled-components\";\n\nconst Curtain = styled.div`\n  position: fixed;\n  top: 0;\n  left: 0;\n  height: 100%;\n  width: 100%;\n  background-color: rgba(0,0,0,.3);\n`;\n\nconst Wrapper = styled.div`\n  position: absolute;\n  top: 100px;\n  right: 0;\n  left: 0;\n  margin: auto;\n  height: 200px;\n  width: 500px;\n  animation: ${props => props.spread ? 'spread 1000ms ease' : 'collapsed 800ms ease'};\n\n  @keyframes spread {\n    from {\n      overflow: hidden;\n      height: 0;\n    }\n    to {\n      overflow: visible;\n      height: 500px;\n    }\n  }\n\n  @keyframes collapsed {\n    from {\n      overflow: hidden;\n      height: 500px;\n    }\n    to {\n      height: 0;\n    }\n  }\n`;\n\nexport function Modal({\n  children,\n  type = 'success',\n  onClose\n}) {\n  const [spread, setSpread] = useState(true)\n\n  function handleCurtainClick() {\n    setSpread(false)\n  }\n\n  function handleTransEnd() {\n    if (!spread) {\n      onClose()\n    }\n  }\n\n  return (\n    <Curtain onClick={handleCurtainClick}>\n      <Wrapper spread={spread} onTransitionEnd={handleTransEnd}>\n        <Frame show={spread} animate={true} level={3} corners={4} layer={type}>\n          { children }\n        </Frame>\n      </Wrapper>\n    </Curtain>\n  );\n}\n","import React, { useCallback, useState } from \"react\";\nimport { Words, Heading, Loading } from \"arwes\";\nimport styled from \"styled-components\";\nimport { useDropzone } from \"react-dropzone\";\nimport { put2Qiniu } from \"../utils/qiniu\";\nimport { Modal } from \"./modal\";\n\nconst DropHere = styled.div`\n  display: flex;\n  justify-content: center;\n  align-items: center;\n  height: 300px;\n  width: 300px;\n  border: 2px dashed #999;\n  margin: 30px auto;\n  border-radius: 12px;\n  color: #999;\n  font-size: 50px;\n  outline: none;\n  cursor: pointer;\n`;\n\nexport function Uploader() {\n  const [loading, setLoading] = useState(false);\n  const [code, setCode] = useState('');\n  const [resultMessage, setResultMessage] = useState(false);\n\n  function handleClose() {\n    setResultMessage('')\n  }\n\n  const handleDrop = useCallback(\n    files => {\n      setLoading(true);\n\n      put2Qiniu(\n        files[0],\n        res => {\n          setLoading(false);\n          setResultMessage('Now I know you were so dirty...');\n          if (res) {\n            setCode(`Get your secret code: ${res.key}`)\n          }\n        },\n        error => {\n          console.error(error);\n          setResultMessage('It doesn\\'t make sense...')\n          setCode(`You dirty jerk! ${error}`)\n        }\n      );\n    },\n    [setLoading]\n  );\n\n  const { getRootProps, getInputProps } = useDropzone({\n    onDrop: handleDrop\n  });\n\n  return (\n    <>\n      <Heading node=\"h1\" style={{ marginTop: 30 }}>\n        Feed Me With Your Secret\n      </Heading>\n      <Words animate layer=\"header\">\n        Put your secret down here and go away\n      </Words>\n      <DropHere {...getRootProps()}>\n        <input {...getInputProps()} />\n        {loading ? <Loading /> : \"+\"}\n      </DropHere>\n\n      {resultMessage && (\n        <Modal onClose={handleClose}>\n          <h2>Ok I got ya...</h2>\n          <p>{ resultMessage }</p>\n          <p>Wubba lubba dub dub!</p>\n        </Modal>\n      )}\n\n      <Words animate layer=\"\">\n        { code }\n      </Words>\n    </>\n  );\n}\n","const someRuneAlphabets = [\n  'ᚪ',\n  'ᚫ',\n  'ᛉ',\n  'ᚨ',\n  'ᛒ',\n  'ᛍ',\n  'ᛣ',\n  'ᛤ',\n  'ᚳ',\n  'ᛛ',\n  'ᛀ',\n  'ᚺ',\n  'ᛨ',\n  'ᛝ',\n  'ᛜ',\n  'ᛡ',\n  'ᛁ',\n  'ᛇ',\n  'ᛃ',\n  'ᚴ',\n  'ᚲ',\n  'ᛚ',\n  'ᛅ',\n  'ᚼ',\n  'ᛘ',\n  'ᚬ'\n]\n\nexport function getRuneAlpha(charCode) {\n  return someRuneAlphabets[charCode]\n}\n\nexport function getRune(sentence = '') {\n  let raw = ''\n  for (let i = 0; i < sentence.length; i ++) {\n    raw += getRuneAlpha(sentence[i].toUpperCase().charCodeAt() - 65)\n  }\n\n  return raw\n}","import React, { useState } from 'react'\nimport { Button, Words } from 'arwes'\nimport styled from 'styled-components'\nimport { getRune } from '../utils/rune'\nimport { Modal } from './modal'\n\nconst Wrapper = styled.div`\n  position: absolute;\n  top: 15%;\n  left: 0;\n  right: 0;\n  margin: auto;\n  width: 500px;\n  padding: 20px;\n  display: flex;\n  flex-direction: column;\n  justify-content: center;\n  align-items: center;\n`\n\nconst TypeBox = styled.div`\n  position: relative;\n  height: 40px;\n  width: 100%;\n  text-align: center;\n  padding: 20px;\n  margin-bottom: 20px;\n`\n\nconst Input = styled.input`\n  position: absolute;\n  left: 0;\n  top: 0;\n  z-index: 2;\n  width: 100%;\n  opacity: 0;\n`\n\nconst Output = styled(Words)`\n  position: absolute;\n  left: 0;\n  top: 0;\n  z-index: 1;\n  display: inline-block;\n  text-align: center;\n  font-size: 30px;\n  width: 100%;\n`\n\nconst Submit = styled(Button)`\n  height: 40px;\n  width: 100px;\n`\n\nexport function Entry({\n  onPass\n}) {\n  const [code, setCode] = useState('')\n  const [result, setResult] = useState('')\n\n  function handleChange(ev) {\n    setCode(ev.target.value)\n  }\n\n  function handleSubmit() {\n    if (code.toUpperCase() === 'TEQUILASUNRISE') {\n      setResult('ok')\n      setTimeout(() => {\n        onPass()\n      }, 3000)\n    } else {\n      setResult('bad')\n    }\n  }\n  \n  function handleClose() {\n    setResult('')\n  }\n\n  return (\n    <Wrapper>\n      <TypeBox>\n        <Input onChange={handleChange} />\n        <Output layer=\"success\">\n          { getRune(code) }\n        </Output>\n      </TypeBox>\n      <Submit animate layer=\"success\" onClick={handleSubmit}>\n        <i className=\"mdi mdi-chemical-weapon\" /> enter\n      </Submit>\n\n      {result && (\n        <Modal type={result === 'ok' ? 'success' : 'alert'} onClose={handleClose}>\n          <Words animate layer={result === 'ok' ? 'success' : 'alert'}>\n            {result === 'ok' ? 'Checked, General!' : 'InAccessible!'}\n          </Words>\n        </Modal>\n      )}\n    </Wrapper>\n  )\n}","import React, { useState } from \"react\";\nimport \"./styles.css\";\nimport { createTheme, ThemeProvider, Arwes } from \"arwes\";\n\nimport { Uploader } from \"./components/uploader\";\nimport { Entry } from './components/entry';\n\nexport default function App() {\n  const [authed, setAuthStatus] = useState(false)\n\n  function handlePass() {\n    setAuthStatus(true)\n  }\n\n  return (\n    <ThemeProvider theme={createTheme()}>\n      <Arwes className=\"App\">\n        {authed ? (\n          <Uploader />\n        ) : (\n          <Entry onPass={handlePass} />\n        )}\n      </Arwes>\n    </ThemeProvider>\n  );\n}\n","import React from \"react\";\nimport ReactDOM from \"react-dom\";\n\nimport App from \"./App\";\n\nconst rootElement = document.getElementById(\"root\");\nReactDOM.render(\n  <React.StrictMode>\n    <App />\n  </React.StrictMode>,\n  rootElement\n);\n"],"sourceRoot":""}